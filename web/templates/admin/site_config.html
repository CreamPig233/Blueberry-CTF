{% extends 'admin/adminbase.html' %}

{% set menu_active = "site" %}

{% block body %}

<div class="ui segments">
    <div class="ui secondary segment">
        通用
    </div>

    <div class="ui segment">

        <form class="ui form" method="post" action="{{url_for('admin.api_set_siteconfig')}}">
            <div class="field">
                <label>网站名称</label>
                <input type="text" name="site_name" value="{{site_config['site_name']}}">
            </div>

            <div class="field">
                <label>是否允许公开注册</label>
                <div class="ui selection dropdown">
                    <input type="hidden" name="is_allow_register" value="{{site_config['is_allow_register']}}">
                    <i class="dropdown icon"></i>
                    <div class="default text">请选择</div>
                    <div class="menu">
                        <div class="item" data-value="yes"><i class="green lock open icon"></i>允许注册</div>
                        <div class="item" data-value="no"><i class="red lock icon"></i>禁止注册</div>
                    </div>
                </div>
            </div>

            <div class="field">
                <label>Static resources</label>
                <div class="ui selection dropdown">
                    <input type="hidden" name="use_local_resources" value="{{site_config['use_local_resources']}}">
                    <i class="dropdown icon"></i>
                    <div class="default text">Select</div>
                    <div class="menu">
                        <div class="item" data-value="yes"><i class="blue ethernet icon"></i>Local</div>
                        <div class="item" data-value="no"><i class="green cloud icon"></i>CDN</div>
                    </div>
                </div>
            </div>

            <div class="field">
                <label>头像</label>
                <div class="ui selection dropdown">
                    <input type="hidden" name="use_gravatar" value="{{site_config['use_gravatar']}}">
                    <i class="dropdown icon"></i>
                    <div class="default text">请选择</div>
                    <div class="menu">
                        <div class="item" data-value="yes"><i class="green cloud icon"></i>使用 Gravatar</div>
                        <div class="item" data-value="no"><i class="blue user icon"></i>使用默认用户头像</div>
                    </div>
                </div>
            </div>

            <div class="field">
                <label>比赛开始时间</label>
                <div class="ui calendar" id="start_time">
                    <div class="ui fluid input left icon">
                      <i class="calendar icon"></i>
                      <input type="text" name="start_time" placeholder="日期 / 时间" value="{{site_config['start_time']}}">
                    </div>
                </div>
            </div>

            <div class="field">
                <label>比赛结束时间</label>
                <div class="ui calendar" id="end_time">
                    <div class="ui fluid input left icon">
                      <i class="calendar icon"></i>
                      <input type="text" name="end_time" placeholder="日期 / 时间" value="{{site_config['end_time']}}">
                    </div>
                </div>
            </div>

            <div class="field">
                <label>在搜索框下面显示的标签</label>
                <div class="ui fluid input left icon">
                    <i class="tags icon"></i>
                    <input type="text" name="head_tags" placeholder="例如: web | pwn" value="{{site_config['head_tags']}}">
                </div>
            </div>

            <script>
                $('#start_time').calendar({
                    formatter: {
                        time: 'H:mm',
                        cellTime: 'H:mm'
                    }
                });

                $('#end_time').calendar({
                    formatter: {
                        time: 'H:mm',
                        cellTime: 'H:mm'
                    }
                });
            </script>

            <div class="field">
                <label>Decay lambda, for every λ people who complete this task, the score is halved. (minimum: 25% base point)</label>
                <input type="text" name="decay_lambda" value="{{site_config['decay_lambda']}}">
            </div>

            <div class="field">
                <label>User info extra fields (json list)</label>
                <input type="text" name="userinfo_extra_fields" value="{{site_config['userinfo_extra_fields']}}">
            </div>

            <div class="field">
                <label>每个用户可以同时运行的最大容器数</label>
                <input type="text" name="player_max_container_num" value="{{site_config['player_max_container_num']}}">
            </div>

            <button class="ui button labeled icon" type="submit"><i class="pen icon"></i>更新</button>
        </form>

        <script>
            $('.selection.dropdown').dropdown();
        </script>


    </div>

</div>


<div class="ui segments">
    <div class="ui secondary segment">
        公告板
    </div>

    <div class="ui segment">

        <form class="ui form" method="post" action="{{url_for('admin.api_set_msgboard')}}">
            <div class="field">
                <textarea name="msgboard" style="font-family: Consolas;"
                    rows="20">{{site_config['message_board']}}</textarea>
            </div>

            <button class="ui button labeled icon" type="submit"><i class="pen icon"></i>更新</button>
        </form>
    </div>

</div>



{% endblock %}
