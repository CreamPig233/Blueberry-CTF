{% extends 'admin/adminbase.html' %}

{% set menu_active = "user" %}

{% block body %}


<div>
    <div class="ui segments">
        <div class="ui secondary segment">
            <i class="user icon"></i>用户信息
        </div>
    
        <div class="ui segment">
            <table class="ui very basic fixed single line table">
                <tbody>
                    <tr>
                        <td class="two wide">用户 ID</td>
                        <td>
                            {{g.info.id}}
                            {% if g.info.is_admin %}<i class='blue user secret icon'></i>{% endif %}
                            {% if not g.info.is_visible %}<i class="red eye slash icon"></i>{% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td class="two wide">用户名</td>
                        <td>{{g.info.username}}</td>
                    </tr>
                    <tr>
                        <td class="two wide">邮箱</td>
                        <td>{{g.info.email}}</td>
                    </tr>
                    <tr>
                        <td class="two wide">注册时间</td>
                        <td>{{g.info.register_time}}</td>
                    </tr>
                    <tr>
                        <td class="two wide">额外信息</td>
                        <td>{{g.info.extra_info}}</td>
                    </tr>
                    <tr>
                        <td class="two wide">是否为管理员?</td>
                        <td>
                            {% if g.info.is_admin %}
                            <span class="ui primary horizontal label">管理员</span>

                            <a href="{{url_for('admin.api_unset_admin', uid=g.info.id)}}">
                                <i class="times icon"></i>取消设置
                            </a>
                            {% else %}
                            <span class="ui horizontal label">非管理员</span>

                            <a href="{{url_for('admin.api_set_admin', uid=g.info.id)}}">
                                <i class="tools icon"></i>设置为管理员
                            </a>
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td class="two wide">是否可见?</td>
                        <td>
                            {% if g.info.is_visible %}
                            <span class="ui horizontal label">可见</span>

                            <a href="{{url_for('admin.api_unset_visible', uid=g.info.id)}}">
                                <i class="eye slash icon"></i>设置为不可见
                            </a>
                            {% else %}
                            <span class="ui red horizontal label">不可见</span>

                            <a href="{{url_for('admin.api_set_visible', uid=g.info.id)}}">
                                <i class="eye icon"></i>设置为可见
                            </a>
                            {% endif %}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

    </div>

    <div>
        <table class="ui single line table">
            <thead>
                <tr>
                    <th>任务</th>
                    <th>提交时间</th>
                    <th>Flag</th>
                </tr>
            </thead>
            <tbody>
                {% for s in g.latest_submits %}
                <tr>
                    <div style="display: none">#{{s.task_id}}</div>
                    <td><a href="{{url_for('problem.show_problem_detail', pid=s.problem_id)}}">{{s.title}}</a><span class="ui grey text"> - 任务 {{s.task_order}}</span></td>
                    <td>{{s.submit_time}}</td>
                    <td>
                        {% if s.is_accepted%}
                        <i class="green check icon"></i>
                        {% else %}
                        <i class="red times icon"></i>
                        {% endif %}
                        {{s.flag}}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>



{% endblock %}